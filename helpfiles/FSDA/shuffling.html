<!DOCTYPE HTML> <html itemscope="" xmlns="http://www.w3.org/1999/xhtml"><head><title>shuffling</title><meta content="refpage" name="chunktype"><meta content="function:shuffling" itemprop="refentity" name="refentity"><link href="includesFS/bootstrap.min.css" rel="stylesheet" type="text/css"><meta content="text/javascript" http-equiv="Content-Script-Type"><meta content="fcn" itemprop="pagetype" name="toctype"><meta content="ref/function" itemprop="infotype" name="infotype" /><meta content="shuffling does a random permutation of the elements of input vector." itemprop="description" name="description" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /><script type="text/x-mathjax-config">MathJax.Hub.Config({extensions: ["tex2jax.js"],jax: ["input/TeX","output/HTML-CSS"],menuSettings: {zoom: "Double-Click", zscale: "300"},tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},MathMenu: {showRenderer: false},"HTML-CSS": {availableFonts: ["TeX"],preferredFont: "TeX",imageFont: null}});</script><script type="text/javascript" src="includesFS/Mathjax/MathJax.js"></script><script src="includesFS/matlab-highlighter.min.js"></script><link href="includesFS/matlab-highlighter.css" rel="stylesheet" type="text/css"><script type="text/javascript" src="includesFS/jquery-latest.js"></script><script>$(document).ready(function(){      $("#div002").load("includesFS/top.html");      $("#div001").load("includesFS/bottom.html");});</script><script src="includesFS/jquery-latest.js" type="text/javascript"></script><link href="includesFS/site6.css?201505100807" rel="stylesheet" type="text/css"><link href="includesFS/site6_lg.css?201505100807" media="screen and (min-width: 1200px)" rel="stylesheet"><link href="includesFS/site6_md.css?201505100807" media="screen and (min-width: 992px) and (max-width: 1199px)" rel="stylesheet"><link href="includesFS/site6_sm+xs.css?201505100807" media="screen and (max-width: 991px)" rel="stylesheet"><link href="includesFS/site6_sm.css?201505100807" media="screen and (min-width: 768px) and (max-width: 991px)" rel="stylesheet"><link href="includesFS/site6_xs.css?201505100807" media="screen and (max-width: 767px)" rel="stylesheet"><link href="includesFS/site6_offcanvas.css?201505100807" rel="stylesheet" type="text/css"><script src="includesFS/l10n.js" type="text/javascript"></script><script src="includesFS/SHAREDdocscripts.js"></script><script src="includesFS/PRODUCTdocscripts.js"></script><script src="includesFS/mw.toc.js" type="text/javascript"></script><script src="includesFS/mw.imagescaling.js" type="text/javascript"></script><script src="includesFS/mw.imageanimation.js" type="text/javascript"></script><script src="includesFS/jquery.highlight.js"></script><script src="includesFS/bootstrap.min.js" type="text/javascript"></script><script src="includesFS/global.js"></script><script src="includesFS/bottom.js" type="text/javascript"></script><script src="includesFS/suggest.js" type="text/javascript"></script><script src="includesFS/underscore-min.js"></script><link href="includesFS/reset.css" rel="stylesheet" type="text/css"><link href="includesFS/960.css" rel="stylesheet" type="text/css"><link href="includesFS/doc_center.css" rel="stylesheet" type="text/css"><link href="includesFS/doc_center_installed.css" rel="stylesheet" type="text/css"><link href="includesFS/doc_center.css" rel="stylesheet" type="text/css"><link href="includesFS/doc_center_installed.css" rel="stylesheet" type="text/css"><link href="includes/product/css/doc_center_print.css" media="print" rel="stylesheet" type="text/css"></head><body  onload="highlightMATLABCode();" id="responsive_offcanvas"><div class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-xs-12 col-sm-6 col-sm-push-6 col-md-5 col-md-push-7" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2016a" data-language="en" action="../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="sr-only">Search Documentation</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Documentation" id="docsearch"><div class="input-group-btn"><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search pull-right icon_32 visible-xs" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="col-sm-6 col-sm-pull-6 col-md-7 col-md-pull-5" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../documentation-center.html">Documentation</a></h1></div></div></div><div class="visible-xs" id="search_actuator"><button class="btn icon-search btn_search pull-right icon_16" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div><!--END.CLASS row--></div><!--END.CLASS container-fluid--></div><!--START.CLASS sticky_header_container--><div class="sticky_header_container includes_subnav"><div class="horizontal_nav_container"><div id="nav_toggle" class="offcanvas_actuator" data-target="#sidebar" data-toggle="offcanvas"><button class="btn" type="button"><span class="sr-only">Toggle navigation</span><span class="icon-menu icon_32"></span></button><span class="offcanvas_actuator_label"></span><span class="offcanvas_actuator_close"></span></div><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"></div></div></div></div></div><div class="row-offcanvas row-offcanvas-left"><div id="sidebar" class="sidebar-offcanvas" role="navigation"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" xmlns:atict="http://www.arbortext.com/namespace/atict"><li itemprop="breadcrumb" itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb"><a href="../documentation-center.html" itemprop="url"><span itemprop="title">All Products</span></a></li></ul><ul class="nav_disambiguation" xmlns:atict="http://www.arbortext.com/namespace/atict"><li class="product"><a href="index.html">Flexible Statistics and Data Analysis (FSDA)</a><div class="dropdown"><span id="dropdownMenu1" class="icon-arrow-down icon_16" data-toggle="dropdown"></span><ul aria-labelledby="dropdownMenu1" class="dropdown-menu dropdown-menu-right" role="menu"><li role="presentation"><a href="examples.html" role="menuitem" tabindex="-1">Examples</a></li><li role="presentation"><a href="functionlist.html" role="menuitem" tabindex="-1">Functions and Other Reference</a></li><li role="presentation"><a href="release-notes.html" role="menuitem" tabindex="-1">Release Notes</a></li><li role="presentation"><a href="tutorials.html" role="menuitem" tabindex="-1">Tutorials</a></li></ul></div></li></ul><ul xmlns:atict="http://www.arbortext.com/namespace/atict" class="nav_disambiguation"><li><a href="index.html">Flexible Statistics and Data Analysis Toolbox</a></li><li><a href="function-cate.html" itemprop="url">Functions</a></li></ul><!-- --><ul class="nav_scrollspy nav" xmlns:atict="http://www.arbortext.com/namespace/atict"><li class="nav_scrollspy_function"><a href="#responsive_offcanvas">shuffling</a></li><li id="SSPY810-refentry" class="nav_scrollspy_title">On this page</li><li><a class="intrnllnk" href="#syntax">Syntax</a></li><li><a class="intrnllnk" href="#Description">Description</a></li><li><a class="intrnllnk" href="#Examples">Examples</a><ul><li><a class="intrnllnk" href="#Example_1">shuffling applied to a set of 20 elements.</a></li></ul></li><li><a class="intrnllnk" href="#ExtraExamples">Extra Examples</a><ul><li><a class="intrnllnk" href="#ExtraExample_1">shuffling applied with parsimonious data type.</a></li><li><a class="intrnllnk" href="#ExtraExample_2">check of the permutation produced by shuffling.</a></li><li><a class="intrnllnk" href="#ExtraExample_3">Computation time of shuffling and randperm.</a></li><li><a class="intrnllnk" href="#ExtraExample_4">Computation time of shuffling and randperm.</a></li></ul></li><li><a class="intrnllnk" href="#Inputs">Input Arguments</a><ul><li><a class="intrnllnk" href="#input_argument_x">x</a></li></ul></li><li><a class="intrnllnk" href="#OutputArgs">Output Arguments</a><ul><li><a class="intrnllnk" href="#output_argument_x">x</a></li></ul></li><li><a class="intrnllnk" href="#MoreAbout">More About</a></li><li><a class="intrnllnk" href="#References">References</a></li><li><a class="intrnllnk" href="#SeeAlso">See Also</a></li></ul></nav><script src="includesFS/offcanvas.js"></script></div><div id="div002"></div><div class="site_container site_toc_closed"><div class="page_container"><div class="content_frame"><div id="content_container" class="content_container"><section id="doc_center_content"><div class="function_ref"><div itemprop="content"><h1 itemprop="title">shuffling</h1><div class="doc_topic_desc"><div class="purpose_container"><p itemprop="purpose">shuffling does a random permutation of the elements of input vector</p><div class="switch"><a id="expandAllPage" href="javascript:void(0);">expand all in page</a></div></div></div></div><div class="ref_sect"><h2 id="syntax">Syntax</h2><div class="syntax_signature"><div class="syntax_signature_module"><ul><li><code class="synopsis">x=shuffling(x)</code><span class="syntax_example"><a class="intrnllnk" href="shuffling.html#Example_1">example</a></span></li></ul></div></div></div>	<div class="ref_sect" itemprop="content">							<h2 id="Description">Description</h2>							<div class="descriptions">								<div class="description_module"><div class="description_element">	<p class="syntax_example">	<a class="intrnllnk" href="shuffling.html#Example_1">	example</a></p>	<p><span itemprop="syntax"><code><a class="intrnllnk" href="#outputarg_x"><code>x</code></a>=shuffling(<a class="intrnllnk" href="#inputarg_x"><code>x</code></a>)</code></span>shuffling applied to a set of 20 elements.</p></div>								</div>							</div>							<div class="clear">							</div>						</div><div class="ref_sect" itemprop="content"><div class="examples"><h2 id="Examples">Examples</h2><div id="expandableExamples" class="expandableContent"><p class="switch"><a class="expandAllLink"href="javascript:void(0);">expand all</a></p><div id="example_1" class="example_module expandableContent"><div id="Example_1"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"> <li><img alt="" src="images_help/M.gif" style="width: 12px; height: 12px"> shuffling applied to a set of 20 elements.</li></span></a></span></h3><div class="collapse"><p><div class="programlisting"><div class="codeinput"><pre class="matlab-code">
    shuffling(1:20)</pre></div></div><pre class="codeoutput">
ans =

  Columns 1 through 13

     6     4     2    12    14     9    11     7    13     5    10    19    16

  Columns 14 through 20

    18    15    17     8     3    20     1

</pre></p></div></div></div><p> </p><h3 id="ExtraExamples" class="bottom_ruled">Related Examples</h3><div id="ExtraExample_1" class="example_module expandableContent"><div id="ExtraExample_1"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"><li>shuffling applied with parsimonious data type.</li></span></a></span></h3><div class="collapse"><p>
     shuffling applied to a set of 20 elements, but using a parsimonious
     data type; this is convenient if the vector is big.<div class="programlisting"><div class="codeinput"><pre class="matlab-code">
    shuffling(int8(1:20))</pre></div></div></p></div></div><div id="ExtraExample_2" class="example_module expandableContent"><div id="ExtraExample_2"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"><li>check of the permutation produced by shuffling.</li></span></a></span></h3><div class="collapse"><p><div class="programlisting"><div class="codeinput"><pre class="matlab-code">
    x = 1:200000;
    numel(unique(shuffling(x)))</pre></div></div></p></div></div><div id="ExtraExample_3" class="example_module expandableContent"><div id="ExtraExample_3"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"><li>Computation time of shuffling and randperm.</li></span></a></span></h3><div class="collapse"><p> 
     An extensive test for various sample sizes.
     REMARK: shuffling code is interpreted whereas randperm is compiled;
     therefore, the comparison has to be done using tic-toc statements, 
     as in the example below (the MATLAB profiler would over-estimate the 
     shuffling time). <div class="programlisting"><div class="codeinput"><pre class="matlab-code">
    RefTime = 1;
    for n = [10, 10^2, 10^3, 10^4, 10^5, 10^6, 10^7]
       X = 1:n;

       % Estimate the number of profiling loops:
       iniTime = cputime;
       countLoop = 0;
       while cputime - iniTime &lt; RefTime
          Xp = X(randperm(n));  
          clear('Xp');   % Necessary to suppress JIT acceleration
          countLoop = countLoop + 1;
       end
       nDigit = max(1, floor(log10(max(1, countLoop))) - 1);
       nLoop  = max(4, round(countLoop / 10 ^ nDigit) * 10 ^ nDigit);

       % monitor randperm
       tic;
       for i = 1:nLoop
          Xp = X(randperm(n));
          clear('Xp');
       end
       RandPermTime = toc;

       % monitor shuffling
       tic;
       for i = 1:nLoop
          Xp = shuffling(X);
          clear('Xp');
       end
       ShufflingTime = toc;

       % results
       fprintf('\n%d elements shuffled %d times: \n', n, nLoop);
       disp(['    - shuffling etime (seconds): ' num2str(ShufflingTime)]);
       disp(['    - randperm  etime (seconds): ' num2str(RandPermTime)]);
       fprintf('SHUFFLING TIME IS %.1f%% of RANDPERM TIME\n', 100.0 * ShufflingTime / RandPermTime);

    end</pre></div></div></p></div></div><div id="ExtraExample_4" class="example_module expandableContent"><div id="ExtraExample_4"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"><li>Computation time of shuffling and randperm.</li></span></a></span></h3><div class="collapse"><p>
     Now the sample size is chosen at random, between 1 and 1000000.
     Note that results can differ between MATLAB releases. See below.<div class="programlisting"><div class="codeinput"><pre class="matlab-code">
    stoc = 0; rtoc = 0; loops = 100; n = zeros(100,1);
    for i=1:loops
        n(i) = randi(1000000 , 1);
        %n(i) = floor(1000000*abs(randn));
        x = randi(1000000 , n(i) , 1);
        nn=numel(x);

        st = tic;
        xperm1 = shuffling(x);
        stoc = stoc+toc(st);

        rt = tic;
        ix = randperm(nn);
        xperm2 = x(ix);
        rtoc = rtoc+toc(rt);

        clear('xperm1','ix','xperm2'); % Necessary to suppress JIT acceleration, for realistic times
    end
    disp(['shuffling etime (seconds): ' num2str(stoc)]);
    disp(['randperm  etime (seconds): ' num2str(rtoc)]);
    fprintf('==&gt; SHUFFLING TIME IS %.1f%% of RANDPERM TIME\n', 100.0 * stoc / rtoc);

    % Results on R2016b
    %     shuffling etime (seconds): 4.5303
    %     randperm  etime (seconds): 5.3804
    %     ==&gt; SHUFFLING TIME IS 84.2% of RANDPERM TIME

    % Results on R2012a
    % shuffling etime (seconds): 7.9629
    % randperm  etime (seconds): 4.9526
    % ==&gt; SHUFFLING TIME IS 160.8% of RANDPERM TIME

    % Results on R2009a
    % shuffling etime (seconds): 8.4239
    % randperm  etime (seconds): 9.5947
    % ==&gt; SHUFFLING TIME IS 87.8% of RANDPERM TIME
</pre></div></div></p></div></div></div></div><div class="ref_sect" itemprop="content"><h2 id="Inputs">Input Arguments</h2><div class="expandableContent"><div class="arguments"><div class="input_argument_container"><p class="switch"><a class="expandAllLink" href="javascript:void(0);">expand all</a></p><div class="expandableContent"> <div id="inputarg_x" class="clearfix"> </div> <h3 id="input_argument_x" class="expand"> <span> <a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"> <span class="argument_name"><code>x</code> &#8212; A set of elements. </span>  </a><span class="example_desc">Vector of length t.</span></span></h3> <div class="collapse"> <p></p> <p class="datatypelist"><strong> Data Types: </strong><code>single|double</code></p> </div> </div></div></div></div></div><div class="ref_sect" itemprop="content"><h2 id="OutputArgs" >Output Arguments</h2><div class="expandableContent"><div class="arguments"><div class="output_argument_container"><p class="switch"><a class="expandAllLink" href="javascript:void(0);">expand all</a></p><div class="expandableContent"><div id="outputarg_x" class="clearfix"></div><h3 id="output_argument_x" class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="argument_name"><code>x</code> &#8212;A permutation of the set of elements in x.</span></a><span class="example_desc"><code> </code>Vector of length t</span></span></h3><div class="collapse"><p> 
       Data Types - single|double</p></div></div></div></div></div></div><div class="moreabout ref_sect"><h2 id="MoreAbout">More About</h2><div class="expandableContent"><p class="switch"><a class="expandAllLink" href="javascript:void(0);">expand all</a></p><div class="expandableContent" itemprop="content"><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span>Additional Details </span></a></span></h3><div class="collapse"><p><p>
 If set $x$ has $t$ elements, the objective is to obtain each of the $t!$
 pemutations with equal probability, especially when $t$ is large. To
 achieve this goal we use backward Knuth's shuffling, which is based on
 the Fisher-Yates shuffle.</p> <p>

 shuffling has been introduced as an alternative to MATLAB function
 randperm. Randperm makes a call to sort(rand(1,n)) and, overall, is
 slower than shuffling (for example, in R2009a shuffling was on average
 25 faster). If compiled as mex file, shuffling becomes much more
 efficient than x(randperm(numel(x))) solution (it is about 60 faster for
 n=10^6). C code that can be used for this purpose is available at the
<a href="http://it.mathworks.com/matlabcentral/fileexchange/27076-shuffle">http://it.mathworks.com/matlabcentral/fileexchange/27076-shuffle</a> website
 as part of Jan Simon's Shuffle library.</p><p>

</p></p></div></div></div></div><div class="ref_sect" itemprop="content"><div class="bibliography"><h2 id="References">References</h2> <div><p>Knuth, Donald E. (1969). The Art of Computer Programming volume 2,
 Seminumerical algorithms, Reading, MA: Addison-Wesley, pp. 124-125.</p></div><div><p>Fisher, R.A.; Yates, F. (1948) [1938]. Statistical tables for biological,
 agricultural and medical research (3rd ed.). London, Oliver & Boyd. pp
 26-27.</p></div></div></div><div class="ref_sect"><h2 id="SeeAlso">See Also</h2><p><span itemprop="seealso"><a href="matlab:web(fullfile(docroot,'matlab/ref/randperm.html'))" itemprop="url"><span itemprop="name"><code>randperm</code></span></a></span></div><i>This page has been automatically generated by our routine <a href="publishFS.html">publishFS</a></i></div></section></div></div></div></div><div id="div001"></div></body></html>