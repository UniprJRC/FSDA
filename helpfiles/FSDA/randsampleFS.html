<!DOCTYPE HTML> <html itemscope="" xmlns="http://www.w3.org/1999/xhtml"><head><title>randsampleFS</title><meta content="refpage" name="chunktype"><meta content="function:randsampleFS" itemprop="refentity" name="refentity"><link href="includesFS/bootstrap.min.css" rel="stylesheet" type="text/css"><meta content="text/javascript" http-equiv="Content-Script-Type"><meta content="fcn" itemprop="pagetype" name="toctype"><meta content="ref/function" itemprop="infotype" name="infotype" /><meta content="randsampleFS generates a random sample of k elements from the integers 1 to n (k&lt;=n)." itemprop="description" name="description" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" /><script type="text/x-mathjax-config">MathJax.Hub.Config({extensions: ["tex2jax.js"],jax: ["input/TeX","output/HTML-CSS"],menuSettings: {zoom: "Double-Click", zscale: "300"},tex2jax: {inlineMath: [["$","$"],["\\(","\\)"]]},MathMenu: {showRenderer: false},"HTML-CSS": {availableFonts: ["TeX"],preferredFont: "TeX",imageFont: null}});</script><script type="text/javascript" src="includesFS/Mathjax/MathJax.js"></script><script src="includesFS/matlab-highlighter.min.js"></script><link href="includesFS/matlab-highlighter.css" rel="stylesheet" type="text/css"><script type="text/javascript" src="includesFS/jquery-latest.js"></script><script>$(document).ready(function(){      $("#divtop").load("includesFS/top.html");      $("#divbottom").load("includesFS/bottom.html");});</script><script src="includesFS/jquery-latest.js" type="text/javascript"></script><link href="includesFS/site6.css?201505100807" rel="stylesheet" type="text/css"><link href="includesFS/site6_lg.css?201505100807" media="screen and (min-width: 1200px)" rel="stylesheet"><link href="includesFS/site6_md.css?201505100807" media="screen and (min-width: 992px) and (max-width: 1199px)" rel="stylesheet"><link href="includesFS/site6_sm+xs.css?201505100807" media="screen and (max-width: 991px)" rel="stylesheet"><link href="includesFS/site6_sm.css?201505100807" media="screen and (min-width: 768px) and (max-width: 991px)" rel="stylesheet"><link href="includesFS/site6_xs.css?201505100807" media="screen and (max-width: 767px)" rel="stylesheet"><link href="includesFS/site6_offcanvas.css?201505100807" rel="stylesheet" type="text/css"><script src="includesFS/l10n.js" type="text/javascript"></script><script src="includesFS/SHAREDdocscripts.js"></script><script src="includesFS/PRODUCTdocscripts.js"></script><script src="includesFS/mw.toc.js" type="text/javascript"></script><script src="includesFS/mw.imagescaling.js" type="text/javascript"></script><script src="includesFS/mw.imageanimation.js" type="text/javascript"></script><script src="includesFS/jquery.highlight.js"></script><script src="includesFS/bootstrap.min.js" type="text/javascript"></script><script src="includesFS/global.js"></script><script src="includesFS/bottom.js" type="text/javascript"></script><script src="includesFS/suggest.js" type="text/javascript"></script><script src="includesFS/underscore-min.js"></script><link href="includesFS/reset.css" rel="stylesheet" type="text/css"><link href="includesFS/960.css" rel="stylesheet" type="text/css"><link href="includesFS/doc_center.css" rel="stylesheet" type="text/css"><link href="includesFS/doc_center_installed.css" rel="stylesheet" type="text/css"><link href="includesFS/doc_center.css" rel="stylesheet" type="text/css"><link href="includesFS/doc_center_installed.css" rel="stylesheet" type="text/css"><link href="includes/product/css/doc_center_print.css" media="print" rel="stylesheet" type="text/css"></head><body  onload="highlightMATLABCode();" id="responsive_offcanvas">  <div id="doc_header_spacer" class="header"></div><div class="sticky_header_container includes_subnav"><div class="section_header level_3"><div class="container-fluid"><div class="row" id="mobile_search_row"><div class="col-xs-12 col-sm-6 col-sm-push-6 col-md-5 col-md-push-7" id="mobile_search"><div class="search_nested_content_container"><form id="docsearch_form" name="docsearch_form" method="get" data-release="R2017a" data-language="en" action="../templates/searchresults.html"><div class="input-group tokenized_search_field"><label class="sr-only">Search Help</label><input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch"><div class="input-group-btn"><button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button></div></div></form></div><button class="btn icon-remove btn_search pull-right icon_32 visible-xs" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div><div class="col-sm-6 col-sm-pull-6 col-md-7 col-md-pull-5" id="section_header_title"><div class="section_header_content"><div class="section_header_title"><h1><a href="../documentation-center.html">Documentation</a></h1></div></div></div><div class="visible-xs" id="search_actuator"><button class="btn icon-search btn_search pull-right icon_16" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div></div><!--END.CLASS row--> </div><!--END.CLASS container-fluid--> </div><!--END.CLASS section_header level_3--><div class="horizontal_nav"><div class="horizontal_nav_container"><div class="offcanvas_actuator" data-toggle="offcanvas" data-target="#sidebar" id="nav_toggle"><button type="button" class="btn"><span class="sr-only">Toggle navigation</span><span class="icon-menu icon_24"></span></button><span class="offcanvas_actuator_label"></span><span class="offcanvas_actuator_close"></span> </div><div class="offcanvas_horizontal_nav"><div class="container-fluid"><div class="row"><div class="col-md-12 hidden-xs hidden-sm"></div></div></div></div></div></div></div><!--END.CLASS sticky_header_container--><div class="row-offcanvas row-offcanvas-left"><div id="sidebar" class="sidebar-offcanvas" role="navigation"><nav class="offcanvas_nav" role="navigation"><ul class="nav_breadcrumb" xmlns:atict="http://www.arbortext.com/namespace/atict"><li itemprop="breadcrumb" itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb"> <a href="../documentation-center.html" itemprop="url"> <span itemprop="title">All Products</span></a></li></ul><ul class="nav_disambiguation" xmlns:atict="http://www.arbortext.com/namespace/atict"><li class="product"><a href="index.html">Flexible Statistics and Data Analysis (FSDA)</a><div class="dropdown"> <span id="dropdownMenu1" class="icon-arrow-down icon_16" data-toggle="dropdown"> </span><ul aria-labelledby="dropdownMenu1" class="dropdown-menu dropdown-menu-right" role="menu"><li role="presentation"> <a href="examples.html" role="menuitem" tabindex="-1">Examples</a></li><li role="presentation"> <a href="function-alpha.html" role="menuitem" tabindex="-1"> Functions and Other Reference</a></li><li role="presentation"> <a href="release_notes.html?s_cid=doc_flyout" role="menuitem" tabindex="-1"> Release Notes</a></li><li role="presentation"> <a href="tutorials.html" role="menuitem" tabindex="-1"> Tutorials</a></li></ul></div></li></ul><ul xmlns:atict="http://www.arbortext.com/namespace/atict" class="nav_disambiguation"> <li><a href="index.html">Flexible Statistics and Data Analysis Toolbox</a> </li> <li><a href="function-cate.html" itemprop="url">Functions</a></li></ul><!-- --><ul class="nav_scrollspy nav" xmlns:atict="http://www.arbortext.com/namespace/atict">  <li class="nav_scrollspy_function"> <a href="#responsive_offcanvas">randsampleFS</a></li> <li id="SSPY810-refentry" class="nav_scrollspy_title">On this page</li><li><a class="intrnllnk" href="#syntax">Syntax</a></li><li><a class="intrnllnk" href="#Description">Description</a></li><li><a class="intrnllnk" href="#Examples">Examples</a><ul><li><a class="intrnllnk" href="#Example_1">randsampleFS with default options.</a></li><li><a class="intrnllnk" href="#Example_2">randsampleFS with optional argument set to method (2).</a></li><li><a class="intrnllnk" href="#Example_3">randsampleFS with optional arguments set to method (3).</a></li></ul></li><li><a class="intrnllnk" href="#ExtraExamples">Extra Examples</a><ul><li><a class="intrnllnk" href="#ExtraExample_1">randsampleFS Weighted Sampling Without Replacement.</a></li></ul></li><li><a class="intrnllnk" href="#Inputs">Input Arguments</a><ul><li><a class="intrnllnk" href="#input_argument_n">n</a></li><li><a class="intrnllnk" href="#input_argument_k">k</a></li><li><a class="intrnllnk" href="#input_argument_method">method</a></li><li><a class="intrnllnk" href="#input_argument_after2011b">after2011b</a></li></ul></li><li><a class="intrnllnk" href="#OutputArgs">Output Arguments</a><ul><li><a class="intrnllnk" href="#output_argument_y">y</a></li></ul></li><li><a class="intrnllnk" href="#MoreAbout">More About</a></li><li><a class="intrnllnk" href="#References">References</a></li><li><a class="intrnllnk" href="#SeeAlso">See Also</a></li></ul></nav><script src="includesFS/offcanvas.js"></script></div><div id="divtop"></div><div class="site_container site_toc_closed"><div class="page_container"><div class="content_frame"><div id="content_container" class="content_container"><section id="doc_center_content"><div class="function_ref"><div itemprop="content"><h1 itemprop="title">randsampleFS</h1><div class="doc_topic_desc"><div class="purpose_container"><p itemprop="purpose">randsampleFS generates a random sample of k elements from the integers 1 to n (k&lt;=n)</p><div class="switch"><a id="expandAllPage" href="javascript:void(0);">expand all in page</a></div></div></div></div><div class="ref_sect"><h2 id="syntax">Syntax</h2><div class="syntax_signature"><div class="syntax_signature_module"><ul><li><code class="synopsis">y=randsampleFS(n,k)</code><span class="syntax_example"><a class="intrnllnk" href="randsampleFS.html#Example_1">example</a></span></li><li><code class="synopsis">y=randsampleFS(n,k,method)</code><span class="syntax_example"><a class="intrnllnk" href="randsampleFS.html#Example_2">example</a></span></li><li><code class="synopsis">y=randsampleFS(n,k,method,after2011b)</code><span class="syntax_example"><a class="intrnllnk" href="randsampleFS.html#Example_3">example</a></span></li></ul></div></div></div>	<div class="ref_sect" itemprop="content">							<h2 id="Description">Description</h2>							<div class="descriptions">								<div class="description_module"><div class="description_element">	<p class="syntax_example">	<a class="intrnllnk" href="randsampleFS.html#Example_1">	example</a></p>	<p><span itemprop="syntax"><code><a class="intrnllnk" href="#outputarg_y"><code>y</code></a>=randsampleFS(<a class="intrnllnk" href="#inputarg_n"><code>n</code></a>,<a class="intrnllnk" href="#inputarg_k"><code>k</code></a>)</code></span>randsampleFS with default options.</p></div><div class="description_element">	<p class="syntax_example">	<a class="intrnllnk" href="randsampleFS.html#Example_2">	example</a></p>	<p><span itemprop="syntax"><code><a class="intrnllnk" href="#outputarg_y"><code>y</code></a>=randsampleFS(<a class="intrnllnk" href="#inputarg_n"><code>n</code></a>,<a class="intrnllnk" href="#inputarg_k"><code>k</code></a>,<a class="intrnllnk" href="#inputarg_method"><code>method</code></a>)</code></span>randsampleFS with optional argument set to method (2).</p></div><div class="description_element">	<p class="syntax_example">	<a class="intrnllnk" href="randsampleFS.html#Example_3">	example</a></p>	<p><span itemprop="syntax"><code><a class="intrnllnk" href="#outputarg_y"><code>y</code></a>=randsampleFS(<a class="intrnllnk" href="#inputarg_n"><code>n</code></a>,<a class="intrnllnk" href="#inputarg_k"><code>k</code></a>,<a class="intrnllnk" href="#inputarg_method"><code>method</code></a>,<a class="intrnllnk" href="#inputarg_after2011b"><code>after2011b</code></a>)</code></span>randsampleFS with optional arguments set to method (3).</p></div>								</div>							</div>							<div class="clear">							</div>						</div><div class="ref_sect" itemprop="content"><div class="examples"><h2 id="Examples">Examples</h2><div id="expandableExamples" class="expandableContent"><p class="switch"><a class="expandAllLink"href="javascript:void(0);">expand all</a></p><div id="example_1" class="example_module expandableContent"><div id="Example_1"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"> <li><img alt="" src="images_help/M.gif" style="width: 12px; height: 12px"> randsampleFS with default options.</li></span></a></span></h3><div class="collapse"><p>
     default method (1) is used.<div class="programlisting"><div class="codeinput"><pre class="matlab-code">
    randsampleFS(1000,10)</pre></div></div><pre class="codeoutput">
ans =

   792   794   963   890   487   527   575   132   465   787

</pre></p></div></div><div id="example_2" class="example_module expandableContent"><div id="Example_2"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"> <li><img alt="" src="images_help/M.gif" style="width: 12px; height: 12px"> randsampleFS with optional argument set to method (2).</li></span></a></span></h3><div class="collapse"><p><div class="programlisting"><div class="codeinput"><pre class="matlab-code">
    method = 2;
    randsampleFS(100,10,method)</pre></div></div><pre class="codeoutput">
ans =

    85    95     5    15    25    35    45    55    65    75

</pre></p></div></div><div id="example_3" class="example_module expandableContent"><div id="Example_3"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"> <li>randsampleFS with optional arguments set to method (3).</li></span></a></span></h3><div class="collapse"><p><div class="programlisting"><div class="codeinput"><pre class="matlab-code">
    method = 3;
    % Here, being nsel so big wrt nsamp, it is likely to obtain repetitions.
    randsampleFS(100,10,method)</pre></div></div></p></div></div></div><p> </p><h3 id="ExtraExamples" class="bottom_ruled">Related Examples</h3><div id="ExtraExample_1" class="example_module expandableContent"><div id="ExtraExample_1"></div><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="example_title"><li>randsampleFS Weighted Sampling Without Replacement.</li></span></a></span></h3><div class="collapse"><p>
     Extract k=10 number in [-1000 -900] with gamma distributed weights.<div class="programlisting"><div class="codeinput"><pre class="matlab-code">
     population = -1000:1:-900;
     n = numel(population);
     wgts = sort(random('gamma',0.3,2,n,1),'descend');

     k=10;
     y = randsampleFS(n,k,wgts);
     sample  = population(y);
     
     plot(wgts,'.r')
     hold on;
     text(y,wgts(y),'X');
     title('Weight distribution with the extracted numbers superimposed')</pre></div></div></p></div></div></div></div><div class="ref_sect" itemprop="content"><h2 id="Inputs">Input Arguments</h2><div class="expandableContent"><div class="arguments"><div class="input_argument_container"><p class="switch"><a class="expandAllLink" href="javascript:void(0);">expand all</a></p><div class="expandableContent"> <div id="inputarg_n" class="clearfix"> </div> <h3 id="input_argument_n" class="expand"> <span> <a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"> <span class="argument_name"><code>n</code> &#8212; A vector of numbers will be selected from the integers 1 to n. </span>  </a><span class="example_desc">Scalar, a positive integer.</span></span></h3> <div class="collapse"> <p></p> <p class="datatypelist"><strong> Data Types: </strong><code>single|double</code></p> </div> </div><div class="expandableContent"> <div id="inputarg_k" class="clearfix"> </div> <h3 id="input_argument_k" class="expand"> <span> <a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"> <span class="argument_name"><code>k</code> &#8212; The number of elements to be selected. </span>  </a><span class="example_desc">Non negative integer.</span></span></h3> <div class="collapse"> <p></p> <p class="datatypelist"><strong> Data Types: </strong><code>single|double</code></p> </div> </div><div id="optionalarguments" class="clearfix"></div><h3 id="namevaluepairs" class="bottom_ruled">Optional Arguments</h3><div class="expandableContent"> <div id="inputarg_method" class="clearfix"> </div> <h3 id="input_argument_method" class="expand"> <span> <a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"> <span class="argument_name"><code>method</code> &#8212; Sampling methods. </span>  </a><span class="example_desc">Scalar or vector.</span></span></h3> <div class="collapse"> <p><p>Methods used to extract the subsets. See more about for details.</p> <p>
            Default is method = 0.</p> <p>
            - Scalar from 0 to 3 determining the method used to extract
             (without replacement) the random sample.</p> <p>
            - Vector of weights: in such a case, a weighted sampling without
              replacement algorithm is applied using that vector of weights.</p><p>
            </p></p>	<p class="description_valueexample">       <strong>Example: </strong><code>randsampleFS(100,10,2)
</code></p> <p class="datatypelist"><strong> Data Types: </strong><code>single|double</code></p> </div> </div><div class="expandableContent"> <div id="inputarg_after2011b" class="clearfix"> </div> <h3 id="input_argument_after2011b" class="expand"> <span> <a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"> <span class="argument_name"><code>after2011b</code> &#8212; MATLAB version flag. </span>  </a><span class="example_desc">Logical.</span></span></h3> <div class="collapse"> <p><p>Indicates if the MATLAB version 
            in use is later than R2012a (7.14). Used to speed up
            computations in function subsets and, more in general, in
            simulation experiments which use randsampleFS intensively.</p> <p>
            </p></p>	<p class="description_valueexample">       <strong>Example: </strong><code>randsampleFS(100,10,2,true) or
</code>            randsampleFS(100,10,2,~verLessThan('MATLAB','7.14'))</p> <p class="datatypelist"><strong> Data Types: </strong><code>logical</code></p> </div> </div></div></div></div></div><div class="ref_sect" itemprop="content"><h2 id="OutputArgs" >Output Arguments</h2><div class="expandableContent"><div class="arguments"><div class="output_argument_container"><p class="switch"><a class="expandAllLink" href="javascript:void(0);">expand all</a></p><div class="expandableContent"><div id="outputarg_y" class="clearfix"></div><h3 id="output_argument_y" class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span class="argument_name"><code>y</code> &#8212;A column vector of k values sampled at random from the integers 1:n.</span></a><span class="example_desc">For methods 0, 1, 2 and weighted sampling the elements  extracted
           are unique; For method 3 (included for historical reasons) there is
           no guarantee that the elements extracted are unique</span></span></h3><div class="collapse"><p>
           Data Types - single|double.</p></div></div></div></div></div></div><div class="moreabout ref_sect"><h2 id="MoreAbout">More About</h2><div class="expandableContent"><p class="switch"><a class="expandAllLink" href="javascript:void(0);">expand all</a></p><div class="expandableContent" itemprop="content"><h3 class="expand"><span><a href="javascript:void(0);" style="display: block;" title="Expand/Collapse"><span>Additional Details</span></a></span></h3><div class="expand"><p><p>
   The method=0 uses MATLAB function randperm. In old MATLAB releases
   randperm was slower than FSDA function shuffling, which is used in
   method 1 (for example, in R2009a - MATLAB 7.8 - randperm was at least
   50 slower).</p> <p>  

   If method=1 the approach depends on the population and sample sizes:</p> <p>
   - if $n &lt; 1000$ and $k &lt; n/(10 + 0.007n)$, that is if the population is
     relatively small and the desired sample is small compared to the
     population, we repeatedly sample with replacement until there are k
     unique values;</p> <p>
   - otherwise, we do a random permutation of the population and return  
     the first k elements.</p> <p> 
   The threshold $k &lt; n/(10 + 0.007n)$ has been determined by simulation
   under MATLAB R2016b. Before, the threshold was $n &lt; 4*k$.</p> <p>

   If method=2 systematic sampling is used, where the starting point is
   random and the step is also random.</p> <p> 

   If method=3 random sampling is based on the old but well known Linear
   Congruential Generator (LCG) method. In this case there is no guarantee
   to get unique numbers. The method is included for historical reasons.</p> <p>

   If method is a vector of n weights, then Weighted Sampling Without
   Replacement is applied. Our implementation follows Efraimidis and
   Spirakis (2006). MATLAB function datasample follows Wong and  Easton
   (1980), which is also quite fast; note however that function datasample
   may be very slow if applied repetedly, for the large amount of time
   spent on options checking.</p> <p>

   Remark on computation performances. Method=2 (systematic sampling) is
   by far the fastest for any practical population size $n$. For example,
   for $n \approx 10^6$ method=2 is two orders of magniture faster than
   method=1. With recent MATLAB releases (after R2011b) method = 0 (which
   uses compiled MATLAB function randperm) has comparable performances, at
   least for reasonably small $k$. In releases before 2012a, randperm was
   considerably slow.</p><p>

</p></p></div></div></div></div><div class="ref_sect" itemprop="content"><div class="bibliography"><h2 id="References">References</h2> <div><p>Fisher, R.A. and Yates, F. (1948), "Statistical tables
 for biological, agricultural and medical research (3rd ed.)",
 Oliver & Boyd, pp. 26-27. [For Method 1]</p></div><div><p>Cochran, W.G. (1977), "Sampling techniques (Third ed.)", Wiley. [For
 Method 2]</p></div><div><p><p>Knuth, D.E. (1997), "The Art of Computer Programming, Volume 2:</p> <p>
 Seminumerical Algorithms, Third Edition" Addison-Wesley, pp. 10-26. [For
 Method 3. For details see: Section 3.2.1: The Linear Congruential Method]</p></p></div><div><p>Efraimidis, P.S. and Spirakis, P.G. (2006), Weighted random sampling with
 a reservoir, "Information Processing Letters", Vol. 97, pp. 181-185. [For
 Weighted Sampling Without Replacement]</p></div><div><p>Wong, C.K. and Easton, M.C. (1980), An Efficient Method for Weighted
 Sampling Without Replacement, "SIAM Journal of Computing", Vol. 9, pp. 111-113.</p></div></div></div><div class="ref_sect"><h2 id="SeeAlso">See Also</h2><p><span itemprop="seealso"><a href="matlab:web(fullfile(docroot,'stats/randsample.html'))" itemprop="url"><span itemprop="name"><code>randsample</code></span></a></span> | <span itemprop="seealso"><a href="matlab:web(fullfile(docroot,'stats/datasample.html'))" itemprop="url"><span itemprop="name"><code>datasample</code></span></a></span> | <span itemprop="seealso"><a href="shuffling.html" itemprop="url"><span itemprop="name"><code>shuffling</code></span></a></span></div><i>This page has been automatically generated by our routine <a href="publishFS.html">publishFS</a></i></div></section></div></div></div></div><div id="divbottom"></div></body></html>